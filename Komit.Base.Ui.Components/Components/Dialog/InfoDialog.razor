@using Komit.Base.Values
@using Komit.Base.Ui.Helpers
<MudDialog Options="MudDialog?.Options ?? new DialogOptions()">
    <DialogContent>
        <MudText Typo="Typo.caption" Color="@TextColor">@ContentText</MudText>
    </DialogContent>
    <DialogActions>
        @if (CancelButtonVisible == true)
        {
            <MudButton @ref="CancelButtonRef" Variant="Variant.Text" OnClick="() => DialogHelper.Cancel(MudDialog)">@CancelButtonText</MudButton>
        }        
        <MudButton @ref="SubmitButtonRef" Color="@ButtonColor" Variant="Variant.Filled" OnClick="() => DialogHelper.Submit(MudDialog)">@ButtonText</MudButton>
    </DialogActions>
</MudDialog>


@code {
    [CascadingParameter]
    IMudDialogInstance? MudDialog { get; set; }
    [Parameter]
    public string? ContentText { get; set; }
    [Parameter]
    public string? ButtonText { get; set; }
    [Parameter]
    public Color ButtonColor { get; set; }
    [Parameter]
    public Color TextColor { get; set; }
    [Parameter]
    public bool CancelButtonVisible { get; set; }
    [Parameter]
    public string? CancelButtonText { get; set; }
    
    [Parameter]
    public DefaultFocusButton DefaultFocusButton { get; set; }

    

    private MudButton? CancelButtonRef { get; set; }
    private MudButton? SubmitButtonRef { get; set; }
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await SubmitButtonRef.FocusAsync();
        }
    }    
}